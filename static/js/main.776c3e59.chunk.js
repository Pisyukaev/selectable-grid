(this["webpackJsonpselectable-grid-example"]=this["webpackJsonpselectable-grid-example"]||[]).push([[0],[,,,,function(e,t,o){e.exports=o(11)},function(e,t,o){},,,,,function(e,t,o){},function(e,t,o){"use strict";o.r(t);o(5);var n=o(0),a=o.n(n),i=o(2),r=o.n(i),l=o(3);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}var c=function(e){var t=e.container,o=e.imgSize,i=Object(n.useRef)(),r=Object(n.useState)(),l=r[0],s=r[1],c=Object(n.useCallback)((function(){if(t){var e=t.clientWidth,o=t.clientHeight;s({width:e,height:o,aspect:e/o})}}),[t]);return Object(n.useEffect)((function(){!i.current&&t&&(i.current=new ResizeObserver(c),i.current.observe(t))}),[t,c]),function(e){var t=e.containerSize,o=e.imgSize,i=a.a.useState({width:0,height:0}),r=i[0],l=i[1];return Object(n.useEffect)((function(){if(t&&o){var e=t.width,n=t.height,a=o.aspect,i=e/a,r=i<=n;l({width:r?e:n*a,height:r?i:n})}}),[t,o]),r}({containerSize:l,imgSize:o})},f="_3yjUb",u=function(){},h={strokeStyle:"blue",lineDashOffset:0,lineDash:[5,5]},v={strokeStyle:"red",fillStyle:"rgba(100,0,0,0.3)",lineDash:[0,0]},g={strokeStyle:"red",fillStyle:"rgba(100,0,0,0.3)"},d=function(e){var t=e.container,o=e.imgSize,i=e.cellSize,r=void 0===i?30:i,l=e.onMouseDown,d=void 0===l?u:l,S=e.onMouseMove,b=void 0===S?u:S,M=e.onMouseUp,p=void 0===M?u:M,y=e.gridStyles,m=void 0===y?h:y,w=e.selectAreaStyles,O=void 0===w?v:w,j=e.cellsStyles,D=void 0===j?g:j,k=Object(n.useRef)(null),z=c({container:t,imgSize:o}),x=function(e){var t=e.container,o=e.canvasSize,i=a.a.useState({top:"0",left:"0",right:"0",bottom:"0"}),r=i[0],l=i[1];return Object(n.useEffect)((function(){if(t&&o.width&&o.height){var e=t.offsetWidth,n=t.offsetHeight,a=o.width,i=o.height,r=a<=e?(e-a)/2:0,s=i<=n?(n-i)/2:0;l({top:s/n*100+"%",left:r/e*100+"%",right:r/e*100+"%",bottom:s/n*100+"%"})}}),[t,o]),r}({container:t,canvasSize:z}),E=function(e){var t=e.canvasSize,o=e.cellSize,i=a.a.useState({top:0,left:0,right:0,bottom:0}),r=i[0],l=i[1];return Object(n.useEffect)((function(){var e=t.width,n=t.height;if(e&&n){var a=Math.floor(e/o),i=(n-Math.floor(n/o)*o)/2-.5,r=(e-a*o)/2-.5;l({top:i,left:r,right:r,bottom:i})}}),[t,o]),r}({canvasSize:z,cellSize:r}),R=function(e){var t=e.onMouseDown,o=e.onMouseMove,i=e.onMouseUp,r=e.paddings,l=e.canvasSize,c=e.cellSize,f=a.a.useState(!1),u=f[0],h=f[1],v=a.a.useState(null),g=v[0],d=v[1],S=a.a.useState({x:0,y:0,w:0,h:0}),b=S[0],M=S[1],p=a.a.useState({top:0,left:0,right:0,bottom:0}),y=p[0],m=p[1],w=a.a.useState({top:0,left:0,right:0,bottom:0}),O=w[0],j=w[1];Object(n.useEffect)((function(){var e=b.x,t=b.y,o=b.w,n=b.h,a=r.left,i=r.top,s=l.width,f=l.height,u=Math.floor((e-a)/c)*c+a,h=Math.floor((t-i)/c)*c+i,v=Math.floor((e+o-a)/c)*c+a+c,g=Math.floor((t+n-i)/c)*c+i+c;m({top:h,left:u,right:v,bottom:g}),j({top:h/f,left:u/s,right:v/s,bottom:g/f})}),[b,r,l,c]),Object(n.useEffect)((function(){h(!1),d(null)}),[l]);return{isDrag:u,area:b,startPoint:g,handleMouseDown:function(e){var o=e.nativeEvent,n={x:o.offsetX,y:o.offsetY};h(!0),d(n),M(s({},n,{w:0,h:0})),t(e,n)},handleMouseMove:function(e){var t=e.nativeEvent,n=t.offsetX,a=t.offsetY;if(u&&g){var i={x:Math.min(n,g.x),y:Math.min(a,g.y),w:Math.abs(n-g.x),h:Math.abs(a-g.y)};M(i),o(e,{area:i,areaInPx:y,areaInPercent:O})}},handleMouseUp:function(e){h(!1),i(e,{area:b,areaInPx:y,areaInPercent:O})}}}({onMouseDown:d,onMouseMove:b,onMouseUp:p,canvasSize:z,cellSize:r,paddings:E}),I=R.isDrag,P=R.area,C=R.handleMouseDown,U=R.handleMouseMove,T=R.handleMouseUp,H=R.startPoint,L=Object(n.useCallback)((function(){if(k.current){var e=k.current.getContext("2d");if(e){var t=z.width,o=z.height,n=E.top,a=E.left,i=E.right,l=E.bottom;e.clearRect(0,0,t,o),e.strokeStyle=m.strokeStyle||h.strokeStyle,e.setLineDash(m.lineDash||h.lineDash),e.lineDashOffset=m.lineDashOffset||h.lineDashOffset,e.beginPath();for(var s=a;s<=t-i;s+=r)e.moveTo(s,n),e.lineTo(s,o-l);for(var c=n;c<=o-l;c+=r)e.moveTo(a,c),e.lineTo(t-i,c);e.stroke()}}}),[z,E,m,r]),N=Object(n.useCallback)((function(){if(k.current){var e=k.current.getContext("2d");if(e){e.strokeStyle=O.strokeStyle||v.strokeStyle,e.fillStyle=O.fillStyle||v.fillStyle,e.setLineDash(O.lineDash||v.lineDash);var t=P.x,o=P.y,n=P.w,a=P.h;e.strokeRect(t,o,n,a),e.fillRect(t,o,n,a)}}}),[P,O]),W=Object(n.useCallback)((function(){if(k.current){var e=k.current.getContext("2d");if(e&&H){e.strokeStyle=D.strokeStyle||g.strokeStyle,e.fillStyle=D.fillStyle||g.fillStyle;for(var t=P.x,o=P.y,n=P.w,a=P.h,i=E.top,l=E.left,s=E.right,c=E.bottom,f=z.width,u=z.height,h=Math.floor((t-l)/r),v=Math.ceil((t+n-l)/r),d=Math.floor((o-i)/r),S=v-h,b=Math.ceil((o+a-i)/r)-d,M=0;M<S;M+=1)for(var p=0;p<b;p+=1){var y=Math.floor((t+r*M-l)/r)*r+l+2.5,m=Math.floor((o+r*p-i)/r)*r+i+2.5;y<l||y>f-s||m<i||m>u-c||(e.clearRect(y,m,r-5,r-5),e.fillRect(y,m,r-5,r-5))}}}}),[H,D,P,E,z,r]);return Object(n.useEffect)((function(){if(k.current){var e=k.current.getContext("2d");e&&(e.clearRect(0,0,z.width,z.height),L(),W(),I&&N())}}),[z,I,L,W,N]),t&&o?Object(n.createElement)("canvas",{ref:k,className:f,style:s({},x),width:z.width,height:z.height,onMouseDown:C,onMouseUp:T,onMouseMove:U}):null},S=(o(10),function(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null),o=Object(n.useState)(void 0),i=Object(l.a)(o,2),r=i[0],s=i[1];return a.a.createElement("div",{ref:e,className:"container"},a.a.createElement("img",{className:"img",ref:t,src:"https://all-t-shirts.ru/goods_images/ru110593II00039d6336575d4ab6f3960422a337e0e78.jpg",alt:"",onLoad:function(e){var t=e.currentTarget,o=t.naturalWidth,n=t.naturalHeight;s({width:o,height:n,aspect:o/n})}}),a.a.createElement(d,{container:e.current,imgSize:r,onMouseDown:function(e,t){console.log("event => ",e),console.log("downPosition => ",t)},onMouseMove:function(e,t){console.log("event => ",e),console.log("\ud83d\ude80 ~ areaInfo",t)},onMouseUp:function(e,t){console.log("event => ",e),console.log("\ud83d\ude80 ~ areaInfo",t)}}))});r.a.render(a.a.createElement(S,null),document.getElementById("root"))}],[[4,1,2]]]);
//# sourceMappingURL=main.776c3e59.chunk.js.map