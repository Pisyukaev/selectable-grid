(this["webpackJsonpselectable-grid-example"]=this["webpackJsonpselectable-grid-example"]||[]).push([[0],[,,,,,function(e,t,n){e.exports=n(12)},function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(6);var a=n(0),o=n.n(a),i=n(4),r=n.n(i),c=n(1),l=n(2),s=function(e,t,n){return Math.floor((e-t)/n)*n+t},u=function(e){var t=e.container,n=e.imgSize,a=o.a.useRef(),i=o.a.useState(),r=Object(c.a)(i,2),l=r[0],s=r[1],u=o.a.useCallback((function(){if(t){var e=t.clientWidth,n=t.clientHeight;s({width:e,height:n,aspect:e/n})}}),[t]);return o.a.useEffect((function(){!a.current&&t&&(a.current=new ResizeObserver(u),a.current.observe(t))}),[t,u]),function(e){var t=e.containerSize,n=e.imgSize,a=o.a.useState({width:0,height:0}),i=Object(c.a)(a,2),r=i[0],l=i[1];return o.a.useEffect((function(){if(t&&n){var e=t.width,a=t.height,o=n.aspect,i=e/o,r=i<=a;l({width:r?e:a*o,height:r?i:a})}}),[t,n]),r}({containerSize:l,imgSize:n})},f="_styles-module__canvas__3yjUb",h=function(){},v={strokeStyle:"black",lineDashOffset:0,lineDash:[0,0],fillStyle:"black"},g={strokeStyle:"blue",lineDashOffset:0,lineDash:[5,5]},b={strokeStyle:"red",fillStyle:"rgba(100,0,0,0.3)",lineDash:[0,0]},d={strokeStyle:"red",fillStyle:"rgba(100,0,0,0.3)"},S=function(e){var t=e.container,n=e.imgSize,i=e.cellSize,r=void 0===i?30:i,S=e.onMouseDown,m=void 0===S?h:S,M=e.onMouseMove,O=void 0===M?h:M,p=e.onMouseUp,j=void 0===p?h:p,w=e.gridStyles,y=void 0===w?g:w,z=e.selectAreaStyles,D=void 0===z?b:z,x=e.cellsStyles,k=void 0===x?d:x,E=Object(a.useRef)(null),R=Object(a.useRef)(null),I=u({container:t,imgSize:n}),C=function(e){var t=e.container,n=e.canvasSize,a=o.a.useState({top:"0",left:"0",right:"0",bottom:"0"}),i=Object(c.a)(a,2),r=i[0],l=i[1];return o.a.useEffect((function(){if(t&&n.width&&n.height){var e=t.offsetWidth,a=t.offsetHeight,o=n.width,i=n.height,r=o<=e?(e-o)/2:0,c=i<=a?(a-i)/2:0,s={top:"".concat(c/a*100,"%"),left:"".concat(r/e*100,"%"),right:"".concat(r/e*100,"%"),bottom:"".concat(c/a*100,"%")};l(s)}}),[t,n]),r}({container:t,canvasSize:I}),P=function(e){var t=e.canvasSize,n=e.cellSize,a=o.a.useState({top:0,left:0,right:0,bottom:0}),i=Object(c.a)(a,2),r=i[0],l=i[1];return o.a.useEffect((function(){var e=t.width,a=t.height;if(e&&a){var o=Math.floor(e/n),i=(a-Math.floor(a/n)*n)/2-.5,r=(e-o*n)/2-.5;l({top:i,left:r,right:r,bottom:i})}}),[t,n]),r}({canvasSize:I,cellSize:r}),U=function(e){var t=e.onMouseDown,n=e.onMouseMove,a=e.onMouseUp,i=e.paddings,r=e.canvasSize,u=e.cellSize,f=o.a.useState(!1),h=Object(c.a)(f,2),v=h[0],g=h[1],b=o.a.useState(null),d=Object(c.a)(b,2),S=d[0],m=d[1],M=o.a.useState({x:0,y:0,w:0,h:0}),O=Object(c.a)(M,2),p=O[0],j=O[1],w=o.a.useState({top:0,left:0,right:0,bottom:0}),y=Object(c.a)(w,2),z=y[0],D=y[1],x=o.a.useState({top:0,left:0,right:0,bottom:0}),k=Object(c.a)(x,2),E=k[0],R=k[1];o.a.useEffect((function(){var e=p.x,t=p.y,n=p.w,a=p.h,o=i.left,c=i.top,l=r.width,f=r.height,h=s(e,o,u),v=s(t,c,u),g=s(e+n,o,u)+u,b=s(t+a,c,u)+u;D({top:v,left:h,right:g,bottom:b}),R({top:v/f,left:h/l,right:g/l,bottom:b/f})}),[p,i,r,u]),o.a.useEffect((function(){g(!1),m(null)}),[r]);return{isDrag:v,area:p,startPoint:S,handleMouseDown:function(e){var n=e.nativeEvent,a={x:n.offsetX,y:n.offsetY};g(!0),m(a),j(Object(l.a)(Object(l.a)({},a),{},{w:0,h:0})),t(e,a)},handleMouseMove:function(e){var t=e.nativeEvent,a=t.offsetX,o=t.offsetY;if(v&&S){var i={x:Math.min(a,S.x),y:Math.min(o,S.y),w:Math.abs(a-S.x),h:Math.abs(o-S.y)};j(i),n(e,{area:i,areaInPx:z,areaInPercent:E})}},handleMouseUp:function(e){g(!1),a(e,{area:p,areaInPx:z,areaInPercent:E})}}}({onMouseDown:m,onMouseMove:O,onMouseUp:j,canvasSize:I,cellSize:r,paddings:P}),_=U.isDrag,T=U.area,A=U.handleMouseDown,F=U.handleMouseMove,H=U.handleMouseUp,N=U.startPoint,W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v,n=t.fillStyle,a=t.lineDash,o=t.lineDashOffset,i=t.strokeStyle;e.fillStyle=n,e.setLineDash(a),e.lineDashOffset=o,e.strokeStyle=i},q=Object(a.useCallback)((function(){if(E.current){var e=E.current.getContext("2d");if(e){var t=I.width,n=I.height,a=P.top,o=P.left,i=P.right,c=P.bottom;e.clearRect(0,0,t,n),W(e,Object(l.a)(Object(l.a)({},v),y)),e.beginPath();for(var s=o;s<=t-i;s+=r)e.moveTo(s,a),e.lineTo(s,n-c);for(var u=a;u<=n-c;u+=r)e.moveTo(o,u),e.lineTo(t-i,u);e.stroke()}}}),[I,P,y,r]),J=Object(a.useCallback)((function(){if(E.current){var e=E.current.getContext("2d");if(e){W(e,Object(l.a)(Object(l.a)({},v),D));var t=T.x,n=T.y,a=T.w,o=T.h;e.strokeRect(t,n,a,o),e.fillRect(t,n,a,o)}}}),[T,D]),L=Object(a.useCallback)((function(){if(E.current){var e=E.current.getContext("2d");if(e&&N){W(e,Object(l.a)(Object(l.a)({},v),k));for(var t=T.x,n=T.y,a=T.w,o=T.h,i=P.top,c=P.left,u=P.right,f=P.bottom,h=I.width,g=I.height,b=Math.floor((t-c)/r),d=Math.ceil((t+a-c)/r),S=Math.floor((n-i)/r),m=d-b,M=Math.ceil((n+o-i)/r)-S,O=0;O<m;O+=1)for(var p=0;p<M;p+=1){var j=s(t+r*O,c,r)+2.5,w=s(n+r*p,i,r)+2.5;j<c||j>h-u||w<i||w>g-f||(e.clearRect(j,w,r-5,r-5),e.fillRect(j,w,r-5,r-5))}}}}),[N,k,T,P,I,r]),X=function e(){if(E.current){var t=E.current.getContext("2d");t&&(t.clearRect(0,0,I.width,I.height),q(),L(),_&&J(),R.current=requestAnimationFrame(e))}};return Object(a.useEffect)((function(){return R.current=requestAnimationFrame(X),function(){R.current&&cancelAnimationFrame(R.current)}})),t&&n?Object(a.createElement)("canvas",{ref:E,className:f,style:Object(l.a)({},C),width:I.width,height:I.height,onMouseDown:A,onMouseUp:H,onMouseMove:F}):null},m=(n(11),function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),n=Object(a.useState)(void 0),i=Object(c.a)(n,2),r=i[0],l=i[1];return o.a.createElement("div",{ref:e,className:"container"},o.a.createElement("img",{className:"img",ref:t,src:"https://all-t-shirts.ru/goods_images/ru110593II00039d6336575d4ab6f3960422a337e0e78.jpg",alt:"",onLoad:function(e){var t=e.currentTarget,n=t.naturalWidth,a=t.naturalHeight;l({width:n,height:a,aspect:n/a})}}),o.a.createElement(S,{container:e.current,imgSize:r,onMouseDown:function(e,t){console.log("event => ",e),console.log("downPosition => ",t)},onMouseMove:function(e,t){console.log("event => ",e),console.log("\ud83d\ude80 ~ areaInfo",t)},onMouseUp:function(e,t){console.log("event => ",e),console.log("\ud83d\ude80 ~ areaInfo",t)}}))});r.a.render(o.a.createElement(m,null),document.getElementById("root"))}],[[5,1,2]]]);
//# sourceMappingURL=main.d1a32442.chunk.js.map