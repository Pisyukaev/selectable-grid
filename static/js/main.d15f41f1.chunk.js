(this["webpackJsonpselectable-grid-example"]=this["webpackJsonpselectable-grid-example"]||[]).push([[0],[,,,,function(e,t,n){e.exports=n(11)},function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(5);var o=n(0),a=n.n(o),i=n(2),r=n.n(i),l=n(3);function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var s=function(e,t,n){return Math.floor((e-t)/n)*n+t},f=function(e){var t=e.container,n=e.imgSize,o=a.a.useRef(),i=a.a.useState(),r=i[0],l=i[1],c=a.a.useCallback((function(){if(t){var e=t.clientWidth,n=t.clientHeight;l({width:e,height:n,aspect:e/n})}}),[t]);return a.a.useEffect((function(){!o.current&&t&&(o.current=new ResizeObserver(c),o.current.observe(t))}),[t,c]),function(e){var t=e.containerSize,n=e.imgSize,o=a.a.useState({width:0,height:0}),i=o[0],r=o[1];return a.a.useEffect((function(){if(t&&n){var e=t.width,o=t.height,a=n.aspect,i=e/a,l=i<=o;r({width:l?e:o*a,height:l?i:o})}}),[t,n]),i}({containerSize:r,imgSize:n})},u="_3yjUb",h=function(){},v={strokeStyle:"black",lineDashOffset:0,lineDash:[0,0],fillStyle:"black"},g={strokeStyle:"blue",lineDashOffset:0,lineDash:[5,5]},d={strokeStyle:"red",fillStyle:"rgba(100,0,0,0.3)",lineDash:[0,0]},b={strokeStyle:"red",fillStyle:"rgba(100,0,0,0.3)"},S=function(e){var t=e.container,n=e.imgSize,i=e.cellSize,r=void 0===i?30:i,l=e.onMouseDown,S=void 0===l?h:l,M=e.onMouseMove,p=void 0===M?h:M,m=e.onMouseUp,w=void 0===m?h:m,y=e.gridStyles,z=void 0===y?g:y,O=e.selectAreaStyles,D=void 0===O?d:O,x=e.cellsStyles,k=void 0===x?b:x,j=Object(o.useRef)(null),E=f({container:t,imgSize:n}),R=function(e){var t=e.container,n=e.canvasSize,o=a.a.useState({top:"0",left:"0",right:"0",bottom:"0"}),i=o[0],r=o[1];return a.a.useEffect((function(){if(t&&n.width&&n.height){var e=t.offsetWidth,o=t.offsetHeight,a=n.width,i=n.height,l=a<=e?(e-a)/2:0,c=i<=o?(o-i)/2:0;r({top:c/o*100+"%",left:l/e*100+"%",right:l/e*100+"%",bottom:c/o*100+"%"})}}),[t,n]),i}({container:t,canvasSize:E}),I=function(e){var t=e.canvasSize,n=e.cellSize,o=a.a.useState({top:0,left:0,right:0,bottom:0}),i=o[0],r=o[1];return a.a.useEffect((function(){var e=t.width,o=t.height;if(e&&o){var a=Math.floor(e/n),i=(o-Math.floor(o/n)*n)/2-.5,l=(e-a*n)/2-.5;r({top:i,left:l,right:l,bottom:i})}}),[t,n]),i}({canvasSize:E,cellSize:r}),P=function(e){var t=e.onMouseDown,n=e.onMouseMove,o=e.onMouseUp,i=e.paddings,r=e.canvasSize,l=e.cellSize,f=a.a.useState(!1),u=f[0],h=f[1],v=a.a.useState(null),g=v[0],d=v[1],b=a.a.useState({x:0,y:0,w:0,h:0}),S=b[0],M=b[1],p=a.a.useState({top:0,left:0,right:0,bottom:0}),m=p[0],w=p[1],y=a.a.useState({top:0,left:0,right:0,bottom:0}),z=y[0],O=y[1];a.a.useEffect((function(){var e=S.x,t=S.y,n=S.w,o=S.h,a=i.left,c=i.top,f=r.width,u=r.height,h=s(e,a,l),v=s(t,c,l),g=s(e+n,a,l)+l,d=s(t+o,c,l)+l;w({top:v,left:h,right:g,bottom:d}),O({top:v/u,left:h/f,right:g/f,bottom:d/u})}),[S,i,r,l]),a.a.useEffect((function(){h(!1),d(null)}),[r]);return{isDrag:u,area:S,startPoint:g,handleMouseDown:function(e){var n=e.nativeEvent,o={x:n.offsetX,y:n.offsetY};h(!0),d(o),M(c({},o,{w:0,h:0})),t(e,o)},handleMouseMove:function(e){var t=e.nativeEvent,o=t.offsetX,a=t.offsetY;if(u&&g){var i={x:Math.min(o,g.x),y:Math.min(a,g.y),w:Math.abs(o-g.x),h:Math.abs(a-g.y)};M(i),n(e,{area:i,areaInPx:m,areaInPercent:z})}},handleMouseUp:function(e){h(!1),o(e,{area:S,areaInPx:m,areaInPercent:z})}}}({onMouseDown:S,onMouseMove:p,onMouseUp:w,canvasSize:E,cellSize:r,paddings:I}),C=P.isDrag,U=P.area,T=P.handleMouseDown,H=P.handleMouseMove,N=P.handleMouseUp,W=P.startPoint,J=function(e,t){void 0===t&&(t=v);var n=t,o=n.fillStyle,a=n.lineDash,i=n.lineDashOffset,r=n.strokeStyle;e.fillStyle=o,e.setLineDash(a),e.lineDashOffset=i,e.strokeStyle=r},L=Object(o.useCallback)((function(){if(j.current){var e=j.current.getContext("2d");if(e){var t=E.width,n=E.height,o=I.top,a=I.left,i=I.right,l=I.bottom;e.clearRect(0,0,t,n),J(e,c({},v,z)),e.beginPath();for(var s=a;s<=t-i;s+=r)e.moveTo(s,o),e.lineTo(s,n-l);for(var f=o;f<=n-l;f+=r)e.moveTo(a,f),e.lineTo(t-i,f);e.stroke()}}}),[E,I,z,r]),X=Object(o.useCallback)((function(){if(j.current){var e=j.current.getContext("2d");if(e){J(e,c({},v,D));var t=U.x,n=U.y,o=U.w,a=U.h;e.strokeRect(t,n,o,a),e.fillRect(t,n,o,a)}}}),[U,D]),Y=Object(o.useCallback)((function(){if(j.current){var e=j.current.getContext("2d");if(e&&W){J(e,c({},v,k));for(var t=U.x,n=U.y,o=U.w,a=U.h,i=I.top,l=I.left,f=I.right,u=I.bottom,h=E.width,g=E.height,d=Math.floor((t-l)/r),b=Math.ceil((t+o-l)/r),S=Math.floor((n-i)/r),M=b-d,p=Math.ceil((n+a-i)/r)-S,m=0;m<M;m+=1)for(var w=0;w<p;w+=1){var y=s(t+r*m,l,r)+2.5,z=s(n+r*w,i,r)+2.5;y<l||y>h-f||z<i||z>g-u||(e.clearRect(y,z,r-5,r-5),e.fillRect(y,z,r-5,r-5))}}}}),[W,k,U,I,E,r]);return Object(o.useEffect)((function(){if(j.current){var e=j.current.getContext("2d");e&&(e.clearRect(0,0,E.width,E.height),L(),Y(),C&&X())}}),[E,C,L,Y,X]),t&&n?Object(o.createElement)("canvas",{ref:j,className:u,style:c({},R),width:E.width,height:E.height,onMouseDown:T,onMouseUp:N,onMouseMove:H}):null},M=(n(10),function(){var e=Object(o.useRef)(null),t=Object(o.useRef)(null),n=Object(o.useState)(void 0),i=Object(l.a)(n,2),r=i[0],c=i[1];return a.a.createElement("div",{ref:e,className:"container"},a.a.createElement("img",{className:"img",ref:t,src:"https://all-t-shirts.ru/goods_images/ru110593II00039d6336575d4ab6f3960422a337e0e78.jpg",alt:"",onLoad:function(e){var t=e.currentTarget,n=t.naturalWidth,o=t.naturalHeight;c({width:n,height:o,aspect:n/o})}}),a.a.createElement(S,{container:e.current,imgSize:r,onMouseDown:function(e,t){console.log("event => ",e),console.log("downPosition => ",t)},onMouseMove:function(e,t){console.log("event => ",e),console.log("\ud83d\ude80 ~ areaInfo",t)},onMouseUp:function(e,t){console.log("event => ",e),console.log("\ud83d\ude80 ~ areaInfo",t)}}))});r.a.render(a.a.createElement(M,null),document.getElementById("root"))}],[[4,1,2]]]);
//# sourceMappingURL=main.d15f41f1.chunk.js.map